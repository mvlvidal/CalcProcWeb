<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="WEB-INF/template.xhtml"
             xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="title">CalcProcWeb - Procedimentos</ui:define>
    <h:form>
        <p:panel header="Cadastro de Procedimentos">
            <p:panelGrid columns="4">
                <p:outputLabel value="Tabela:"/>
                <p:selectOneMenu value="#{proBean.proc1.tabela}" converter="tabelaConversor" required="true">
                    <f:selectItem  itemLabel="Selecione" noSelectionOption="true"/>                    
                    <f:selectItems var="t" itemLabel="#{t.nome}" itemValue="#{t}" value="#{tabBean.tabelas}"/>
                    <p:ajax listener="#{proBean.carregaProcedimentos(proBean.proc1.tabela)}" update="@form" />
                </p:selectOneMenu>
            </p:panelGrid> 
            <p:panelGrid columns="6" rendered="#{proBean.proc1.tabela.tipoTab != null}">               
                <p:outputLabel value="Código:" />
                <p:inputText />
                <p:outputLabel value="Descrição:" />
                <p:inputText />
                <p:outputLabel value="CH:" />
                <p:inputText disabled="#{proBean.proc1.tabela.tipoTab == 'CBHPM'}"/>
                <p:outputLabel value="CO:" />
                <p:inputText disabled="#{proBean.proc1.tabela.tipoTab == 'AMB'}"/>
                <p:outputLabel value="% Porte.:"/>
                <p:inputText  placeholder="Ex: 0.8 (80%)" disabled="#{proBean.proc1.tabela.tipoTab == 'AMB'}"/>
                <p:outputLabel value="Porte Med.:" />
                <p:inputText disabled="#{proBean.proc1.tabela.tipoTab == 'AMB'}"/>
                <p:outputLabel value="Classificação:" />
                <p:inputText />
                <p:outputLabel value="Porte Anest.:" />
                <p:inputText />
                <p:outputLabel value="Filme m²:" />
                <p:inputText />
                <p:commandButton value="Gravar" />
            </p:panelGrid>

            <p:separator />
            
            <h:panelGroup rendered="#{proBean.proc1.tabela.tipoTab != null}">
                <p:dataTable var="proc" value="#{proBean.procedimentos}" rows="5" paginator="true" id="tabProc">
                    <p:column headerText="#" >
                        <h:outputText value="#{proc.id}" />
                    </p:column>
                    <p:column headerText="Código">
                        <h:outputText value="#{proc.codigo}" />
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="#{proc.descricao}" />
                    </p:column>          
                    <p:column headerText="CH" rendered="#{proBean.proc1.tabela.tipoTab == 'AMB'}">
                        <h:outputText value="#{proc.ch}" />
                    </p:column>          
                    <p:column headerText="C.O" rendered="#{proBean.proc1.tabela.tipoTab == 'CBHPM'}">
                        <h:outputText value="#{proc.co}" />
                    </p:column> 
                    <p:column headerText="% Porte" rendered="#{proBean.proc1.tabela.tipoTab == 'CBHPM'}">
                        <h:outputText value="#{proc.percentPorte}" />
                    </p:column>                  
                    <p:column headerText="Porte Med." rendered="#{proBean.proc1.tabela.tipoTab == 'CBHPM'}">
                        <h:outputText value="#{proc.pMedico}" />
                    </p:column>          
                    <p:column headerText="Aux.">
                        <h:outputText value="#{proc.aux}" />
                    </p:column>
                    <p:column headerText="Porte Anest.">
                        <h:outputText value="#{proc.pAnestesico}" />
                    </p:column>
                    <p:column headerText="Filme m²">
                        <h:outputText value="#{proc.qtdFilme}" />
                    </p:column>
                    <p:column headerText="Ação">

                    </p:column>
                </p:dataTable>
            </h:panelGroup>
        </p:panel>       
    </h:form>
</ui:decorate>

