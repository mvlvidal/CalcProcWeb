<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="WEB-INF/template.xhtml"
             xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="title">CalcProcWeb - Procedimentos</ui:define>
    <p:panel header="Cadastro de Procedimentos">
        <h:form>
            <p:panelGrid columns="4">
                <p:outputLabel value="Tipo:" />
                <p:selectOneMenu value="#{proBean.proc1.tipoProc}">
                    <f:selectItem itemLabel="Selecione" />                    
                    <f:selectItems value="#{proBean.carregaTipos()}"/>  
                    <p:ajax update="@form" />
                </p:selectOneMenu>

            </p:panelGrid> 


            <p:separator />

            <h:panelGroup rendered="#{proBean.proc1.tipoProc == 'AMB'}">
                <p:panelGrid columns="6">
                    <p:outputLabel value="Tabela:"/>
                    <p:selectOneMenu value="#{proBean.proc1.tabela}" converter="tabelaConversor">
                        <f:selectItem  itemLabel="Selecione"/>                    
                        <f:selectItems value="#{tabBean.tabelas}" var="tAmb" itemLabel="#{tAmb.nome}" itemValue="#{tAmb}"/> 
                        <p:ajax update="tabAmb" />
                    </p:selectOneMenu>
                    <p:outputLabel value="Código:" />
                    <p:inputText />
                    <p:outputLabel value="Descrição:" />
                    <p:inputText />
                    <p:outputLabel value="CH:" />
                    <p:inputText />
                    <p:outputLabel value="Aux:" />
                    <p:inputText />
                    <p:outputLabel value="Porte Anest.:" />
                    <p:inputText />
                    <p:outputLabel value="Filme m²:" />
                    <p:inputText />
                    <p:commandButton value="Gravar" />
                </p:panelGrid>

                <p:separator />

                <p:dataTable id="tabAmb">
                    <p:column headerText="#">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Código">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="CH">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Aux.">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Porte Anest.">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Filme m²">
                        <h:outputText value="" />
                    </p:column>
                    <p:column headerText="Ação">

                    </p:column>
                </p:dataTable>
            </h:panelGroup>

            <h:panelGroup rendered="#{proBean.proc1.tipoProc == 'CBHPM'}">
                <p:panelGrid columns="6">
                    <p:outputLabel value="Tabela:"/>
                    <p:selectOneMenu value="#{proBean.proc1.tabela}" converter="tabelaConversor">
                        <f:selectItem  itemLabel="Selecione"/>                    
                        <f:selectItems value="#{tabBean.tabelas}" var="tCbhpm" itemLabel="#{tCbhpm.nome}" itemValue="#{tCbhpm}"/>   
                        <p:ajax update="tabCbhpm" process="@this"/>
                    </p:selectOneMenu>
                    <p:outputLabel value="Código:" />
                    <p:inputText value="#{proBean.proc1.codigo}"/>
                    <p:outputLabel value="Descrição:" />
                    <p:inputText value="#{proBean.proc1.descricao}"/>
                    <p:outputLabel value="Custo Op.:" />
                    <p:inputText value="#{proBean.proc1.co}"/>
                    <p:outputLabel value="% Porte.:" />
                    <p:inputText value="#{proBean.proc1.percentPorte}"/>
                    <p:outputLabel value="Porte Med.:" />
                    <p:inputText value="#{proBean.proc1.pMedico}"/>
                    <p:outputLabel value="Aux:" />
                    <p:inputText value="#{proBean.proc1.aux}"/>
                    <p:outputLabel value="Porte Anest.:" />
                    <p:inputText value="#{proBean.proc1.pAnestesico}"/>
                    <p:outputLabel value="Filme m²:" />
                    <p:inputText value="#{proBean.proc1.qtdFilme}"/>
                    <p:commandButton value="Gravar" action="#{proBean.salvar()}" update="tabCbhpm"/>
                </p:panelGrid>

                <p:separator />

                <p:dataTable var="cbhpm" value="#{proBean.procedimentosCbhpm}" id="tabCbhpm" rows="5" paginator="true">
                    <p:column headerText="#">
                        <h:outputText value="#{cbhpm.id}" />
                    </p:column>
                    <p:column headerText="Código">
                        <h:outputText value="#{cbhpm.codigo}" />
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="#{cbhpm.descricao}" />
                    </p:column>          
                    <p:column headerText="C.O">
                        <h:outputText value="#{cbhpm.co}" />
                    </p:column> 
                    <p:column headerText="% Porte">
                        <h:outputText value="#{cbhpm.percentPorte}" />
                    </p:column>                  
                    <p:column headerText="Porte Med.">
                        <h:outputText value="#{cbhpm.pMedico}" />
                    </p:column>          
                    <p:column headerText="Aux.">
                        <h:outputText value="#{cbhpm.aux}" />
                    </p:column>
                    <p:column headerText="Porte Anest.">
                        <h:outputText value="#{cbhpm.pAnestesico}" />
                    </p:column>
                    <p:column headerText="Filme m²">
                        <h:outputText value="#{cbhpm.qtdFilme}" />
                    </p:column>
                    <p:column headerText="Tabela">
                        <h:outputText value="#{cbhpm.tabela.nome}" />
                    </p:column>
                    <p:column headerText="Ação">

                    </p:column>
                </p:dataTable>
            </h:panelGroup>
        </h:form>
    </p:panel>       

</ui:decorate>

